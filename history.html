<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Deleted Shopping Lists History</title>
  <style>
    body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #f5f7fa, #c3cfe2); display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 30px 20px; }
    h1 { color: #333; margin-bottom: 20px; }
    .history-container { width: 90%; max-width: 500px; }
    .history-item { background: #ff4b6e; padding: 12px; border-radius: 10px; margin-bottom: 10px; color: #fff; display: flex; flex-direction: column; gap: 5px; }
    .history-item span { font-size: 15px; }
    .history-item button { align-self: flex-end; background: #333; padding: 4px 8px; border-radius: 5px; font-size: 13px; cursor: pointer; border: none; color: white; }
    .btn-group { display: flex; justify-content: space-between; width: 100%; margin-bottom: 20px; }
    .btn { padding: 10px 14px; border: none; border-radius: 8px; color: white; font-size: 15px; cursor: pointer; }
    .btn-clear { background: #f56a6a; }
    .btn-back { background: #4fa1f5; text-decoration: none; display: flex; align-items: center; justify-content: center; }
    .btn-home { background: #4caf50; text-decoration: none; display: flex; align-items: center; justify-content: center; }
  </style>
</head>
<body>
  <h1>Deleted Shopping Lists History</h1>
  <div class="btn-group">
    <button class="btn btn-clear" id="clearHistoryBtn">Clear All History</button>
    <a href="index.html" class="btn btn-home">Home</a>
  </div>
  <div id="historyList" class="history-container">
    <!-- Deleted lists will appear here -->
  </div>

  <script>
    const historyList = document.getElementById('historyList');
    const clearHistoryBtn = document.getElementById('clearHistoryBtn');

    function showConfirm(msg) { return confirm(msg); }

    function loadHistory() {
      const savedHistory = JSON.parse(localStorage.getItem('deletedLists') || '[]');
      savedHistory.forEach(item => addHistoryItem(item.title, item.items, false));
    }

    function addHistoryItem(title, items, save = true) {
      const div = document.createElement('div');
      div.className = 'history-item';
      const titleSpan = document.createElement('span');
      titleSpan.textContent = `ðŸ—‘ï¸ ${title}`;
      div.appendChild(titleSpan);
      if(items.length > 0){
        const itemSpan = document.createElement('span');
        itemSpan.textContent = 'Items: ' + items.join(', ');
        div.appendChild(itemSpan);
      }
      const delBtn = document.createElement('button');
      delBtn.textContent = 'Delete';
      delBtn.addEventListener('click', () => {
        if(showConfirm('Delete this history item?')) {
          div.remove();
          saveHistory();
        }
      });
      div.appendChild(delBtn);
      historyList.appendChild(div);
      if(save) saveHistory();
    }

    function saveHistory() {
      const historyItems = Array.from(historyList.children).map(div => {
        const spans = div.querySelectorAll('span');
        return { title: spans[0].textContent.replace('ðŸ—‘ï¸ ', ''), items: spans[1] ? spans[1].textContent.replace('Items: ', '').split(', ') : [] };
      });
      localStorage.setItem('deletedLists', JSON.stringify(historyItems));
    }

    clearHistoryBtn.addEventListener('click', () => {
      if(showConfirm('Are you sure you want to clear all delete history?')) {
        while(historyList.firstChild) historyList.removeChild(historyList.firstChild);
        saveHistory();
      }
    });

    loadHistory();
  </script>
</body>
</html>
